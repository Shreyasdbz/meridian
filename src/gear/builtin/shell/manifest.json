{
  "id": "shell",
  "name": "Shell",
  "version": "1.0.0",
  "description": "Built-in Gear for shell command execution with special hardening. Disabled by default — must be explicitly enabled by user. Every execution requires fresh user approval (exempt from Sentinel Memory auto-approval).",
  "author": "Meridian",
  "license": "Apache-2.0",
  "origin": "builtin",
  "checksum": "builtin",
  "actions": [
    {
      "name": "execute",
      "description": "Run a shell command and return stdout, stderr, and exit code. The command is executed as-is with no parameter interpolation. Large outputs are written to workspace files and a file reference is returned.",
      "parameters": {
        "type": "object",
        "properties": {
          "command": {
            "type": "string",
            "description": "The complete shell command to execute (no interpolation — executed as-is)"
          },
          "timeoutMs": {
            "type": "number",
            "description": "Command timeout in milliseconds (default: 30000 = 30s, max: 300000 = 5m)"
          },
          "maxOutputBytes": {
            "type": "number",
            "description": "Maximum output size in bytes before writing to a workspace file (default: 1048576 = 1MB)"
          }
        },
        "required": ["command"],
        "additionalProperties": false
      },
      "returns": {
        "type": "object",
        "properties": {
          "stdout": {
            "type": "string",
            "description": "Standard output (truncated preview if exceeding maxOutputBytes)"
          },
          "stderr": {
            "type": "string",
            "description": "Standard error (truncated preview if exceeding maxOutputBytes)"
          },
          "exitCode": {
            "type": ["number", "null"],
            "description": "Process exit code (null if killed by signal)"
          },
          "signal": {
            "type": "string",
            "description": "Signal that terminated the process, if any (e.g., SIGTERM, SIGKILL)"
          },
          "timedOut": {
            "type": "boolean",
            "description": "Whether the command was killed due to timeout"
          },
          "stdoutFile": {
            "type": "string",
            "description": "Workspace file path containing full stdout (set when output exceeds maxOutputBytes)"
          },
          "stderrFile": {
            "type": "string",
            "description": "Workspace file path containing full stderr (set when output exceeds maxOutputBytes)"
          },
          "command": {
            "type": "string",
            "description": "The command that was executed"
          },
          "executedAt": {
            "type": "string",
            "description": "ISO 8601 timestamp of when the command was executed"
          }
        },
        "required": ["stdout", "stderr", "exitCode", "timedOut", "command", "executedAt"],
        "additionalProperties": false
      },
      "riskLevel": "critical"
    }
  ],
  "permissions": {
    "shell": true,
    "filesystem": {
      "write": ["shell-output/**"]
    }
  },
  "resources": {
    "maxMemoryMb": 256,
    "maxCpuPercent": 50,
    "timeoutMs": 300000
  }
}
